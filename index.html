<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>RateHound</title>
<meta name="theme-color" content="#134c07">
<style>
  :root{--brand:#134c07;--ink:#134c07;--muted:#6b7280;--border:#134c07}
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Arial}

  /* full-viewport helpers (iOS-safe) */
  .vh{height:100vh}
  @supports (height:100dvh){ .vh{height:100dvh} }
  @supports (height:100svh){ .vh{height:100svh} }

  /* SPLASH */
  #splash{
    background:var(--brand); color:#fff;
    display:flex; align-items:center; justify-content:center; text-align:center;
  }
  #splash .inner{width:90%;max-width:420px;display:flex;flex-direction:column;gap:24px;align-items:center}
  .logo{width:180px;height:auto;display:block}

  /* cross-fade */
  .fade{opacity:1;transition:opacity .45s ease}
  .fade.out{opacity:0;pointer-events:none}

  /* SIGNUP */
  #signup{background:#fff; color:var(--ink); display:none}
  #signup.show{display:flex}
  #signup .inner{margin:0 auto; width:min(92%,420px); padding:28px 16px; display:flex; flex-direction:column; gap:14px}
  #signup .inner h1 {
  margin: 0 0 12px;      /* adds more space below the heading */
  font-size: 26px;       /* larger text */
  font-weight: 700;      /* bold for emphasis */
  text-align: center;    /* centers it above the fields */
  color: var(--ink);     /* keep your current text color */
}
  .field {
  width: 100%;
  padding: 12px 14px;
  border: 2px solid var(--border);
  border-radius: 12px;
  background: #fff;
  color: var(--ink);
  font-size: 16px;     /* üëà prevents Safari zoom on focus */
  box-sizing: border-box;
}
  .btn{
    width:100%; padding:14px 18px; border:2px solid var(--brand);
    border-radius:999px; background:#fff; color:var(--brand); font-weight:700; text-align:center; cursor:pointer;
  }
  /* Special styling only for the Sign Up button */
#signUpBtn {
  background: var(--brand);   /* green */
  color: #fff;                /* white text */
  font-size: 20px;            /* larger text */
  padding: 16px 20px;         /* taller button */
  border: none;               /* remove outline */
  border-radius: 999px;       /* pill shape */
  font-weight: 700;           /* bold */
  text-align: center;         /* center text */
  cursor: pointer;            /* pointer on hover */
}
  /* Special styling for the "Both" button */
#bothBtn {
  background: var(--brand);   /* green background */
  color: #fff;                /* white text */
  font-size: 20px;            /* larger text */
  border: none;               /* remove outline */
  border-radius: 999px;        /* rounded but not pill-shaped */
  font-weight: 700;           /* bold */
  text-align: center;
  cursor: pointer;
}
  #signUpBtn:active {
  background: #0f3a05; /* darker green when pressed */
  transform: scale(0.98); /* slight press-down effect */
}
  .btn:active{transform:scale(.99)}
  .hint{color:var(--muted); font-size:12px; text-align:center; margin-top:6px}
  /* PAGE 3 ‚Äî Utility choice */
#utility{background:#fff;color:var(--ink);display:none}
#utility.show{display:flex}
#utility .inner{
  margin:0 auto; width:min(92%,420px);
  padding:28px 16px;
  display:flex; flex-direction:column; gap:16px;
  justify-content:center;               /* vertical center */
  min-height:100vh;
  margin-top:-15vh;  /* nudges everything up slightly */
}
#utility h1{
  margin:0 0 12px; font-size:26px; font-weight:700; text-align:center; color:var(--ink);
}
.btn.tall{
  height:8vh;
  display:flex; align-items:center; justify-content:center;
  border:2px solid var(--brand); background:#fff; color:var(--brand);
  border-radius:12px; font-weight:600; font-size:18px; width:100%;
}
  /* utility select states */
.btn.selectable {
  background:#fff;
  color:var(--brand);
  border:2px solid var(--brand);
}
.btn.selectable.selected {
  background:var(--brand);
  color:#fff;
}

/* hint and Fetch button */
.utilityHint {
  color:var(--muted);
  text-align:center;
  margin-top:6px;
}
#fetchUtilities {
  margin-top:16px;
  background:var(--brand);
  color:#fff;
  border:none;
  border-radius:999px;
  font-size:20px;
  padding:16px 20px;
  opacity:.5;
  pointer-events:none; /* disabled until choice */
}
#fetchUtilities.enabled {
  opacity:1;
  pointer-events:auto;
}

/* PAGE 4 ‚Äî Account intake */
#upload{background:#fff;color:var(--ink);display:none}
#upload.show{display:flex}
#upload .inner{
  margin:0 auto; width:min(92%,420px);
  padding:28px 16px;
  display:flex; flex-direction:column; gap:14px;
  justify-content:flex-start; min-height:100vh;
}
#upload h1{margin:0 0 8px; font-size:26px; font-weight:700; text-align:center}

/* segmented method chooser */
.seg{display:grid; grid-template-columns:1fr 1fr 1fr; gap:8px}
.segbtn{padding:10px 12px; border:2px solid var(--brand); background:#fff; color:var(--brand); border-radius:10px; font-weight:600}
.segbtn.on{background:var(--brand); color:#fff;}

/* panels */
.panel[hidden]{display:none}
.preview{display:none; width:100%; max-height:300px; object-fit:contain; border:1px solid var(--border); border-radius:8px}

/* continue */
#continueUpload{
  background:var(--brand); color:#fff; border:none; border-radius:999px;
  font-size:20px; padding:16px 20px; opacity:.5; pointer-events:none;
}
#continueUpload.enabled{opacity:1; pointer-events:auto}
</style>
</head>
<body>

<!-- Splash -->
<section id="splash" class="vh fade">
  <div class="inner">
    <img class="logo" src="logo.png" alt="RateHound">
   
  </div>
</section>

<!-- Signup landing -->
<section id="signup" class="vh">
  <div class="inner">
    <h1>Let‚Äôs save you some money!</h1>
    <input class="field" id="name" placeholder="Full name" autocomplete="name" inputmode="text">
    <input class="field" id="phone" placeholder="Phone" autocomplete="tel" inputmode="tel">
    <input class="field" id="email" placeholder="Email" type="email" autocomplete="email">
    <button class="btn" id="signUpBtn">Sign up</button>
    <p class="hint">Demo only. No data is sent or stored.</p>
  </div>
</section>
<!-- PAGE 3 ‚Äî Utility choice -->
<section id="utility" class="vh">
  <div class="inner">
    <h1>Save me money on my...</h1>

    <button class="btn tall selectable" id="chooseElectric">Electric Bill</button>
    <button class="btn tall selectable" id="chooseGas">Gas Bill</button>

    <p class="utilityHint">Choose one or both.</p>

    <button class="btn" id="fetchUtilities">One more step!</button>
  </div>
</section>
<!-- PAGE 4 ‚Äî Account intake -->
<section id="upload" class="vh">
  <div class="inner">
    <h1 id="uploadTitle">Upload your bill</h1>

    <!-- segmented chooser -->
    <div class="seg">
      <button type="button" class="sebtn" id="manualBtn">Enter Manually</button>
      <label for="billFile" class="sebtn">Upload Bill</label>
      <button type="button" class="sebtn" id="aiBtn">AI Assist</button>
    </div>

    <!-- panels -->
    <div id="manualPanel" class="panel" hidden>
      <input class="field" placeholder="Account Number">
      <input class="field" placeholder="Zip Code">
    </div>

    <div id="uploadPanel" class="panel" hidden>
      <input id="billFile" type="file" accept="image/*,application/pdf" hidden>
      <img id="preview" class="preview" alt="Bill preview">
    </div>

    <div id="aiPanel" class="panel" hidden>
      <p class="hint">AI Assist will scan your bill and auto-fill details (demo only).</p>
    </div>

    <button class="btn" id="continueUpload">Continue</button>
    <p class="hint">Demo only. No data is sent or stored.</p>
  </div>
</section>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const splash = document.getElementById('splash');
  const signup = document.getElementById('signup');
// When user taps "Sign up", hide signup and show utility page
const signUpBtn = document.getElementById('signUpBtn');
if (signUpBtn) {
  signUpBtn.addEventListener('click', () => {
    document.getElementById('signup').classList.remove('show');
    document.getElementById('utility').classList.add('show');
  });
}
  // Utility selection logic
const sel = { electric:false, gas:false };
const eBtn = document.getElementById('chooseElectric');
const gBtn = document.getElementById('chooseGas');
const fetchU = document.getElementById('fetchUtilities');

function refreshFetch(){
  const any = sel.electric || sel.gas;
  fetchU?.classList.toggle('enabled', any);
}

eBtn?.addEventListener('click', () => {
  sel.electric = !sel.electric;
  eBtn.classList.toggle('selected', sel.electric);
  refreshFetch();
});

gBtn?.addEventListener('click', () => {
  sel.gas = !sel.gas;
  gBtn.classList.toggle('selected', sel.gas);
  refreshFetch();
});

fetchU?.addEventListener('click', () => {
  if (!(sel.electric || sel.gas)) return;

  // Set dynamic title and navigate
const titleEl = document.getElementById('uploadTitle');
titleEl.textContent =
  sel.electric && sel.gas ? 'Upload your electric or gas bill' :
  sel.electric ? 'Upload your electric bill' :
                 'Upload your gas bill';

document.getElementById('utility').classList.remove('show');
document.getElementById('upload').classList.add('show');
window.scrollTo(0, 0);
});
// --- Upload method + validation ---
const segBtns = Array.from(document.querySelectorAll('.segbtn'));
const panels = {
  manual: document.getElementById('m-manual'),
  camera: document.getElementById('m-camera'),
  file:   document.getElementById('m-file'),
};
let method = 'manual';

const acctNumber = document.getElementById('acctNumber');
const serviceAddress = document.getElementById('serviceAddress');
const billCam  = document.getElementById('billCam');
const prevCam  = document.getElementById('previewCam');
const billFile = document.getElementById('billFile');
const prevFile = document.getElementById('previewFile');
const continueBtn = document.getElementById('continueUpload');

function showMethod(m){
  method = m;
  segBtns.forEach(b=>{
    const on = b.dataset.m===m;
    b.classList.toggle('on', on);
    b.setAttribute('aria-selected', on ? 'true' : 'false');
  });
  Object.entries(panels).forEach(([k,el])=> el.hidden = (k!==m));
  validateUpload();
}
segBtns.forEach(b=> b.addEventListener('click', ()=> showMethod(b.dataset.m)));

function validateUpload(){
  let ok = false;
  if(method==='manual'){
    ok = !!acctNumber.value.trim() && !!serviceAddress.value.trim();
  }else if(method==='camera'){
    ok = !!(billCam.files && billCam.files[0]);
  }else{
    ok = !!(billFile.files && billFile.files[0]);
  }
  continueBtn.classList.toggle('enabled', ok);
  continueBtn.toggleAttribute('disabled', !ok);
}

// live validation
[acctNumber, serviceAddress].forEach(el=> el?.addEventListener('input', validateUpload));

// previews
function previewInto(file, imgEl){
  if(file && file.type.startsWith('image/')){
    const url = URL.createObjectURL(file);
    imgEl.src = url; imgEl.style.display='block';
  }else{
    imgEl.style.display='none';
  }
}

billCam?.addEventListener('change', ()=>{
  previewInto(billCam.files?.[0], prevCam);
  validateUpload();
});
billFile?.addEventListener('change', ()=>{
  previewInto(billFile.files?.[0], prevFile);
  validateUpload();
});

// --- Handle electric ‚Üí gas queue when BOTH selected ---
let uploadQueue = [];   // e.g., ['electric','gas']
let uploadIndex = 0;

function setUploadTitleFor(util){
  const title = `Enter your ${util} account`;
  document.getElementById('uploadTitle').textContent = title;
}

function resetPanels(){
  acctNumber.value=''; serviceAddress.value='';
  if (billCam)  billCam.value = '';
  if (billFile) billFile.value = '';
  prevCam.style.display='none'; prevFile.style.display='none';
  showMethod('manual'); // default
}

// continue
continueBtn?.addEventListener('click', ()=>{
  if (!continueBtn.classList.contains('enabled')) return;

  // Demo ‚Äúsave‚Äù would happen here

  // Move to next utility if any
  uploadIndex += 1;
  if (uploadIndex < uploadQueue.length){
    setUploadTitleFor(uploadQueue[uploadIndex]);
    resetPanels();
    validateUpload();
  } else {
    alert('Account info captured (demo).');
    // TODO: navigate to next page in your flow
  }
});
  // auto-transition after 2.5s
  setTimeout(() => {
    splash.classList.add('out');         // fade splash
    setTimeout(() => {                   // after fade, hide splash and show signup
      splash.style.display = 'none';
      signup.classList.add('show');
    }, 450);
  }, 2500);

  // optional: allow tap to skip immediately
  splash.addEventListener('click', () => {
    splash.classList.add('out');
    setTimeout(() => { splash.style.display='none'; signup.classList.add('show'); }, 250);
  });
  }); // end DOMContentLoaded
</script>
</body>
</html>
