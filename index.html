<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>RateHound</title>
<meta name="theme-color" content="#134c07">
<style>
  :root{--brand:#134c07;--ink:#134c07;--muted:#6b7280;--border:#134c07}
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Arial}

  /* full-viewport helpers (iOS-safe) */
  .vh{height:100vh}
  @supports (height:100dvh){ .vh{height:100dvh} }
  @supports (height:100svh){ .vh{height:100svh} }

  /* SPLASH */
  #splash{
    background:var(--brand); color:#fff;
    display:flex; align-items:center; justify-content:center; text-align:center;
  }
  #splash .inner{width:90%;max-width:420px;display:flex;flex-direction:column;gap:24px;align-items:center}
  .logo{width:180px;height:auto;display:block}

  /* cross-fade */
  .fade{opacity:1;transition:opacity .45s ease}
  .fade.out{opacity:0;pointer-events:none}

  /* SIGNUP */
  #signup{background:#fff; color:var(--ink); display:none}
  #signup.show{display:flex}
  #signup .inner{margin:0 auto; width:min(92%,420px); padding:28px 16px; display:flex; flex-direction:column; gap:14px}
  #signup .inner h1 {
  margin: 0 0 12px;      /* adds more space below the heading */
  font-size: 26px;       /* larger text */
  font-weight: 700;      /* bold for emphasis */
  text-align: center;    /* centers it above the fields */
  color: var(--ink);     /* keep your current text color */
}
  .field {
  width: 100%;
  padding: 12px 14px;
  border: 2px solid var(--border);
  border-radius: 12px;
  background: #fff;
  color: var(--ink);
  font-size: 16px;     /* üëà prevents Safari zoom on focus */
  box-sizing: border-box;
}
  .btn{
    width:100%; padding:14px 18px; border:2px solid var(--brand);
    border-radius:999px; background:#fff; color:var(--brand); font-weight:700; text-align:center; cursor:pointer;
  }
  /* Special styling only for the Sign Up button */
#signUpBtn {
  background: var(--brand);   /* green */
  color: #fff;                /* white text */
  font-size: 20px;            /* larger text */
  padding: 16px 20px;         /* taller button */
  border: none;               /* remove outline */
  border-radius: 999px;       /* pill shape */
  font-weight: 700;           /* bold */
  text-align: center;         /* center text */
  cursor: pointer;            /* pointer on hover */
}
  /* Special styling for the "Both" button */
#bothBtn {
  background: var(--brand);   /* green background */
  color: #fff;                /* white text */
  font-size: 20px;            /* larger text */
  border: none;               /* remove outline */
  border-radius: 999px;        /* rounded but not pill-shaped */
  font-weight: 700;           /* bold */
  text-align: center;
  cursor: pointer;
}
  #signUpBtn:active {
  background: #0f3a05; /* darker green when pressed */
  transform: scale(0.98); /* slight press-down effect */
}
  .btn:active{transform:scale(.99)}
  .hint{color:var(--muted); font-size:12px; text-align:center; margin-top:6px}
  /* PAGE 3 ‚Äî Utility choice */
#utility{background:#fff;color:var(--ink);display:none}
#utility.show{display:flex}
#utility .inner{
  margin:0 auto; width:min(92%,420px);
  padding:28px 16px;
  display:flex; flex-direction:column; gap:16px;
  justify-content:center;               /* vertical center */
  min-height:100vh;
  margin-top:-15vh;  /* nudges everything up slightly */
}
#utility h1{
  margin:0 0 12px; font-size:26px; font-weight:700; text-align:center; color:var(--ink);
}
.btn.tall{
  height:8vh;
  display:flex; align-items:center; justify-content:center;
  border:2px solid var(--brand); background:#fff; color:var(--brand);
  border-radius:12px; font-weight:600; font-size:18px; width:100%;
}
  /* utility select states */
.btn.selectable {
  background:#fff;
  color:var(--brand);
  border:2px solid var(--brand);
}
.btn.selectable.selected {
  background:var(--brand);
  color:#fff;
}

/* hint and Fetch button */
.utilityHint {
  color:var(--muted);
  text-align:center;
  margin-top:6px;
}
#fetchUtilities {
  margin-top:16px;
  background:var(--brand);
  color:#fff;
  border:none;
  border-radius:999px;
  font-size:20px;
  padding:16px 20px;
  opacity:.5;
  pointer-events:none; /* disabled until choice */
}
#fetchUtilities.enabled {
  opacity:1;
  pointer-events:auto;
}

/* PAGE 4 ‚Äî Account intake */
#upload{background:#fff;color:var(--ink);display:none}
#upload.show{display:flex}
#upload .inner{
  margin:0 auto; width:min(92%,420px);
  padding:28px 16px;
  display:flex; flex-direction:column; gap:14px;
  justify-content:flex-start; min-height:100vh;
}
#upload h1{margin:0 0 8px; font-size:26px; font-weight:700; text-align:center}

/* method buttons (vertical like earlier utility buttons) */
.method{ width:100%; height:8vh; min-height:64px;
  display:flex; align-items:center; justify-content:center;
  border:2px solid var(--brand); background:#fff; color:var(--brand);
  border-radius:12px; font-weight:600; font-size:18px; margin-top:10px;
}
.method.selected{ background:var(--brand); color:#fff }

/* panels */
.panel[hidden]{display:none}
.preview{display:none; width:100%; max-height:300px; object-fit:contain; border:1px solid var(--border); border-radius:8px}

/* continue */
#continueUpload{
  background:var(--brand); color:#fff; border:none; border-radius:999px;
  font-size:20px; padding:16px 20px; opacity:.5; pointer-events:none;
}
#continueUpload.enabled{opacity:1; pointer-events:auto}
</style>
</head>
<body>

<!-- Splash -->
<section id="splash" class="vh fade">
  <div class="inner">
    <img class="logo" src="logo.png" alt="RateHound">
   
  </div>
</section>

<!-- Signup landing -->
<section id="signup" class="vh">
  <div class="inner">
    <h1>Let‚Äôs save you some money!</h1>
    <input class="field" id="name" placeholder="Full name" autocomplete="name" inputmode="text">
    <input class="field" id="phone" placeholder="Phone" autocomplete="tel" inputmode="tel">
    <input class="field" id="email" placeholder="Email" type="email" autocomplete="email">
    <button class="btn" id="signUpBtn">Sign up</button>
    <p class="hint">Demo only. No data is sent or stored.</p>
  </div>
</section>
<!-- PAGE 3 ‚Äî Utility choice -->
<section id="utility" class="vh">
  <div class="inner">
    <h1>Save me money on my...</h1>

    <button class="btn tall selectable" id="chooseElectric">Electric Bill</button>
    <button class="btn tall selectable" id="chooseGas">Gas Bill</button>

    <p class="utilityHint">Choose one or both.</p>

    <button class="btn" id="fetchUtilities">One more step!</button>
  </div>
</section>
<!-- PAGE 4 ‚Äî Account intake -->
<section id="upload" class="vh">
  <div class="inner">
    <h1 id="uploadTitle">Let‚Äôs start with your electric bill</h1>

    <!-- three vertical method choices -->
    <button class="method" id="mBtnManual">Enter Manually</button>
    <button class="method" id="mBtnUpload">Upload Bill</button>
    <button class="method" id="mBtnAI">AI Assist</button>

    <!-- panels (only one shown at a time) -->
    <div id="m-manual" class="panel" hidden>
      <input class="field" id="acctName"  placeholder="Account name">
      <input class="field" id="acctNumber" placeholder="Account number">
      <input class="field" id="serviceAddr" placeholder="Service address">
    </div>

    <div id="m-upload" class="panel" hidden>
      <input id="billFile" type="file" accept="image/*,application/pdf" aria-label="Upload bill image or PDF">
      <img id="preview" class="preview" alt="Bill preview">
    </div>

    <div id="m-ai" class="panel" hidden>
      <p class="hint">Demo only. Tapping ‚ÄúAI Assist‚Äù marks this step as ready.</p>
    </div>

    <button class="btn" id="continueUpload">Continue</button>
    <p class="hint">Demo only. No data is sent or stored.</p>
  </div>
</section>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const splash = document.getElementById('splash');
  const signup = document.getElementById('signup');
// When user taps "Sign up", hide signup and show utility page
const signUpBtn = document.getElementById('signUpBtn');
if (signUpBtn) {
  signUpBtn.addEventListener('click', () => {
    document.getElementById('signup').classList.remove('show');
    document.getElementById('utility').classList.add('show');
  });
}
  // Utility selection logic
const sel = { electric:false, gas:false };
const eBtn = document.getElementById('chooseElectric');
const gBtn = document.getElementById('chooseGas');
const fetchU = document.getElementById('fetchUtilities');

function refreshFetch(){
  const any = sel.electric || sel.gas;
  fetchU?.classList.toggle('enabled', any);
}

eBtn?.addEventListener('click', () => {
  sel.electric = !sel.electric;
  eBtn.classList.toggle('selected', sel.electric);
  refreshFetch();
});

gBtn?.addEventListener('click', () => {
  sel.gas = !sel.gas;
  gBtn.classList.toggle('selected', sel.gas);
  refreshFetch();
});

fetchU?.addEventListener('click', () => {
  if (!(sel.electric || sel.gas)) return;

 // Queue: electric first, then gas (if both selected)
let uploadQueue = [];
let uploadIndex = 0;

function setUploadTitleFor(kind){
  const titleEl = document.getElementById('uploadTitle');
  if(kind === 'electric') titleEl.textContent = "Let‚Äôs start with your electric bill";
  else if(kind === 'gas')  titleEl.textContent = "Now for your gas account";
  else titleEl.textContent = "Upload your bill";
}

function startUploadFlow(){
  uploadIndex = 0;
  setUploadTitleFor(uploadQueue[0]);
  resetPanels();
  validateUpload();           // ensure Continue is disabled initially
  document.getElementById('utility').classList.remove('show');
  document.getElementById('upload').classList.add('show');
  window.scrollTo(0,0);
}

fetchU?.addEventListener('click', () => {
  if(!(sel.electric || sel.gas)) return;
  uploadQueue = [];
  if(sel.electric) uploadQueue.push('electric');
  if(sel.gas)      uploadQueue.push('gas');
  startUploadFlow();
});
  // ----- method buttons + panels -----
const mBtns = {
  manual:  document.getElementById('mBtnManual'),
  upload:  document.getElementById('mBtnUpload'),
  ai:      document.getElementById('mBtnAI'),
};
const panels = {
  manual:  document.getElementById('m-manual'),
  upload:  document.getElementById('m-upload'),
  ai:      document.getElementById('m-ai'),
};
const continueBtn = document.getElementById('continueUpload');
const fileInput   = document.getElementById('billFile');
const previewEl   = document.getElementById('preview');

function resetPanels(){
  Object.values(panels).forEach(p => p.hidden = true);
  Object.values(mBtns).forEach(b => b.classList.remove('selected'));
  disableContinue();
}
function selectMethod(which){
  resetPanels();
  mBtns[which].classList.add('selected');
  panels[which].hidden = false;
  validateUpload();
}
function enableContinue(){ continueBtn.classList.add('enabled'); continueBtn.style.opacity='1'; continueBtn.style.pointerEvents='auto'; }
function disableContinue(){ continueBtn.classList.remove('enabled'); continueBtn.style.opacity='.5'; continueBtn.style.pointerEvents='none'; }

// button events
mBtns.manual.addEventListener('click', ()=>selectMethod('manual'));
mBtns.upload.addEventListener('click', ()=>selectMethod('upload'));
mBtns.ai.addEventListener('click',     ()=>{
  selectMethod('ai');
  // Demo: mark as ready immediately
  enableContinue();
});

// validation
function validateUpload(){
  // Manual: require three fields
  if(!panels.manual.hidden){
    const ok =
      document.getElementById('acctName').value.trim() &&
      document.getElementById('acctNumber').value.trim() &&
      document.getElementById('serviceAddr').value.trim();
    return ok ? enableContinue() : disableContinue();
  }
  // Upload: require a file
  if(!panels.upload.hidden){
    const ok = !!fileInput.files?.[0];
    return ok ? enableContinue() : disableContinue();
  }
  // AI panel handled in its click handler
  disableContinue();
}

// file preview for images
fileInput?.addEventListener('change', () => {
  const f = fileInput.files?.[0];
  if(!f){ previewEl.style.display='none'; return validateUpload(); }
  if(f.type.startsWith('image/')){
    previewEl.src = URL.createObjectURL(f);
    previewEl.style.display = 'block';
  } else {
    previewEl.style.display = 'none';
  }
  validateUpload();
});

// Continue ‚Üí either next utility or finish
continueBtn.addEventListener('click', () => {
  if(!continueBtn.classList.contains('enabled')) return;
  uploadIndex++;
  if(uploadIndex < uploadQueue.length){
    setUploadTitleFor(uploadQueue[uploadIndex]);
    resetPanels();      // back to method choices
    window.scrollTo(0,0);
  } else {
    alert('Submitted (demo). Next screen would show confirmation.');
  }
});
// --- Upload method + validation ---
const segBtns = Array.from(document.querySelectorAll('.segbtn'));
const panels = {
  manual: document.getElementById('m-manual'),
  camera: document.getElementById('m-camera'),
  file:   document.getElementById('m-file'),
};
let method = 'manual';

const acctNumber = document.getElementById('acctNumber');
const serviceAddress = document.getElementById('serviceAddress');
const billCam  = document.getElementById('billCam');
const prevCam  = document.getElementById('previewCam');
const billFile = document.getElementById('billFile');
const prevFile = document.getElementById('previewFile');
const continueBtn = document.getElementById('continueUpload');

function showMethod(m){
  method = m;
  segBtns.forEach(b=>{
    const on = b.dataset.m===m;
    b.classList.toggle('on', on);
    b.setAttribute('aria-selected', on ? 'true' : 'false');
  });
  Object.entries(panels).forEach(([k,el])=> el.hidden = (k!==m));
  validateUpload();
}
segBtns.forEach(b=> b.addEventListener('click', ()=> showMethod(b.dataset.m)));

function validateUpload(){
  let ok = false;
  if(method==='manual'){
    ok = !!acctNumber.value.trim() && !!serviceAddress.value.trim();
  }else if(method==='camera'){
    ok = !!(billCam.files && billCam.files[0]);
  }else{
    ok = !!(billFile.files && billFile.files[0]);
  }
  continueBtn.classList.toggle('enabled', ok);
  continueBtn.toggleAttribute('disabled', !ok);
}

// live validation
[acctNumber, serviceAddress].forEach(el=> el?.addEventListener('input', validateUpload));

// previews
function previewInto(file, imgEl){
  if(file && file.type.startsWith('image/')){
    const url = URL.createObjectURL(file);
    imgEl.src = url; imgEl.style.display='block';
  }else{
    imgEl.style.display='none';
  }
}

billCam?.addEventListener('change', ()=>{
  previewInto(billCam.files?.[0], prevCam);
  validateUpload();
});
billFile?.addEventListener('change', ()=>{
  previewInto(billFile.files?.[0], prevFile);
  validateUpload();
});

// --- Handle electric ‚Üí gas queue when BOTH selected ---
let uploadQueue = [];   // e.g., ['electric','gas']
let uploadIndex = 0;

function setUploadTitleFor(util){
  const title = `Enter your ${util} account`;
  document.getElementById('uploadTitle').textContent = title;
}

function resetPanels(){
  acctNumber.value=''; serviceAddress.value='';
  if (billCam)  billCam.value = '';
  if (billFile) billFile.value = '';
  prevCam.style.display='none'; prevFile.style.display='none';
  showMethod('manual'); // default
}

// continue
continueBtn?.addEventListener('click', ()=>{
  if (!continueBtn.classList.contains('enabled')) return;

  // Demo ‚Äúsave‚Äù would happen here

  // Move to next utility if any
  uploadIndex += 1;
  if (uploadIndex < uploadQueue.length){
    setUploadTitleFor(uploadQueue[uploadIndex]);
    resetPanels();
    validateUpload();
  } else {
    alert('Account info captured (demo).');
    // TODO: navigate to next page in your flow
  }
});
  // auto-transition after 2.5s
  setTimeout(() => {
    splash.classList.add('out');         // fade splash
    setTimeout(() => {                   // after fade, hide splash and show signup
      splash.style.display = 'none';
      signup.classList.add('show');
    }, 450);
  }, 2500);

  // optional: allow tap to skip immediately
  splash.addEventListener('click', () => {
    splash.classList.add('out');
    setTimeout(() => { splash.style.display='none'; signup.classList.add('show'); }, 250);
  });
  }); // end DOMContentLoaded
</script>
</body>
</html>
